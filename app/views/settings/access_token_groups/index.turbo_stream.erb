<%# TBD: Consider generalizing this component (and groups controller) %>
<%= turbo_stream.replace "groups-select" do %>
  <div id="groups-select">
    <select name="feed[target_group]"
            id="feed_target_group"
            class="form-select"
            data-groups-target="select">
      <option value="">Choose target group...</option>
      <% @managed_groups.each do |group| %>
        <% display_name = group[:screen_name].present? ? "#{group[:username]} (#{group[:screen_name]})" : group[:username] %>
        <% display_name += " ðŸ”’" if group[:is_private] %>
        <option value="<%= group[:username] %>" <%= 'selected' if @selected_group == group[:username] %>><%= display_name %></option>
      <% end %>
    </select>
    <div class="form-text" data-groups-target="helpText">
      Select the Freefeed group
      <a href="#" data-action="click->groups#refreshGroups" class="ms-2">Refresh</a>
    </div>
    <div class="invalid-feedback">Select a target group.</div>
  </div>
<% end %>
