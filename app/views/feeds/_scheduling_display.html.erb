<%# locals: (feed:) %>
<% scheduling_ready = feed.cron_expression.present? %>
<% if scheduling_ready %>
  <i class="bi bi-check-circle-fill text-success me-2"></i>
<% else %>
  <i class="bi bi-circle text-muted me-2"></i>
<% end %>

<% if feed.cron_expression.present? %>
  <% case feed.cron_expression %>
  <% when "*/30 * * * *" %>
    <strong class="me-2">Refresh every 30 minutes</strong>
  <% when "0 * * * *" %>
    <strong class="me-2">Refresh every hour</strong>
  <% when "0 */6 * * *" %>
    <strong class="me-2">Refresh every 6 hours</strong>
  <% when "0 0 * * *" %>
    <strong class="me-2">Refresh daily at midnight</strong>
  <% else %>
    <strong class="me-2">Refresh period:</strong> <code><%= feed.cron_expression %></code>
  <% end %>

  <% if feed.import_after %>
    <span class="text-muted">
      â€¢ Content after <%= feed.import_after.strftime("%B %d, %Y") %>
    </span>
  <% end %>
<% else %>
  <strong class="me-2">Schedule:</strong> <span class="text-muted">not configured</span>
<% end %>

<%= link_to edit_feed_path(feed, section: "scheduling", format: :turbo_stream),
    class: "text-decoration-none ms-2",
    data: { turbo_prefetch: false, turbo_stream: true },
    title: "Edit" do %>
  <i class="bi bi-pencil text-secondary"></i>
<% end %>

