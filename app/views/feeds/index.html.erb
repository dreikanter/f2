<div class="row">
  <div class="col-12">
    <%= page_header "Feeds" do %>
      <%= link_to "New Feed", new_feed_path, class: "btn btn-primary" %>
    <% end %>

    <% if @feeds.any? %>
      <div class="table-responsive">
        <table class="table table-hover table-bordered">
          <thead>
            <tr>
              <th>Name</th>
              <th>Status</th>
              <th>Target Group</th>
              <th>Last Refresh</th>
              <th>Recent Post</th>
            </tr>
          </thead>
          <tbody>
            <% @feeds.each do |feed| %>
              <tr>
                <td>
                  <%= link_to feed, class: "text-decoration-none" do %>
                    <%= feed.name %>
                  <% end %>
                </td>
                <td>
                  <% if feed.enabled? %>
                    <i class="bi bi-check-circle-fill text-success me-1"></i>
                  <% else %>
                    <i class="bi bi-x-circle-fill text-danger me-1"></i>
                  <% end %>
                  <%= feed.state.capitalize %>
                </td>
                <td>
                  <% if feed.target_group.present? %>
                    <%= feed.target_group %>
                  <% else %>
                    <em class="text-muted">None</em>
                  <% end %>
                </td>
                <td>
                  <% if feed.last_refreshed_at %>
                    <small class="text-muted">
                      <%= time_ago_in_words(feed.last_refreshed_at) %> ago
                    </small>
                  <% else %>
                    <em class="text-muted">Never</em>
                  <% end %>
                </td>
                <td>
                  <% if feed.most_recent_post_date %>
                    <small class="text-muted">
                      <%= time_ago_in_words(feed.most_recent_post_date) %> ago
                    </small>
                  <% else %>
                    <em class="text-muted">No posts</em>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <%= pagination_for @feeds,
                         collection_name: "feeds",
                         path_helper: ->(page) { feeds_path(page: page) } %>
    <% else %>
      <div class="text-center py-5">
        <p>No feeds yet</p>
        <p class="text-muted">Create your first feed to start aggregating content.</p>
        <%= link_to "Create Feed", new_feed_path, class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
</div>
