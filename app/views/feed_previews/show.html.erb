<% content_for :title, "Feed Preview" %>

<div class="space-y-8">
  <div class="flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between">
    <div>
      <h1 class="ff-h1">Feed Preview</h1>
    </div>
    <div
      id="header-actions"
      class="flex w-full items-center justify-between gap-3 sm:w-auto sm:justify-end">
      <%= render "feed_previews/header_actions", feed_preview: @feed_preview %>
    </div>
  </div>

  <div class="rounded-xl border border-slate-200 bg-white px-5 py-4 shadow-sm">
    <p class="text-xs font-semibold uppercase tracking-wide text-slate-500">Feed URL</p>
    <div class="mt-2 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
      <a
        href="<%= @feed_preview.url %>"
        target="_blank"
        rel="noopener"
        class="ff-link break-all">
        <%= @feed_preview.url %>
      </a>
      <span class="inline-flex items-center rounded-full bg-slate-100 px-3 py-1 text-xs font-medium text-slate-600">
        <%= t("feed_profiles.#{@feed_preview.feed_profile_key}") %>
      </span>
    </div>
  </div>

  <div
    id="preview-status"
    class="space-y-4"
    aria-busy="<%= @feed_preview.pending? || @feed_preview.processing? %>">
    <% if @feed_preview.ready? %>
      <%= render "feed_previews/completed_status", feed_preview: @feed_preview %>
    <% elsif @feed_preview.pending? || @feed_preview.processing? %>
      <%= render "feed_previews/processing_status", feed_preview: @feed_preview %>
    <% elsif @feed_preview.failed? %>
      <%= render "feed_previews/failed_status", feed_preview: @feed_preview %>
    <% end %>
  </div>
</div>
