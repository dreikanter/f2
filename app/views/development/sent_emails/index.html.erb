<% content_for :title, "Sent Emails" %>

<div class="space-y-8">
  <div class="flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between">
    <h1 class="ff-h1" data-key="development.emails.heading">Sent Emails</h1>
    <% if @emails.any? %>
      <%= button_to "Purge All",
                    purge_development_sent_emails_path,
                    method: :delete,
                    class: class_names("ff-button", "ff-button--secondary", "ff-button--compact", "text-red-600 hover:text-red-700"),
                    data: { turbo_confirm: "Are you sure you want to delete all emails?" } %>
    <% end %>
  </div>

  <% if @emails.empty? %>
    <div class="ff-alert ff-alert--info" data-key="development.emails.empty">
      No emails captured yet. Emails sent in development mode will appear here.
    </div>
  <% else %>
    <div class="space-y-3">
      <% @emails.each do |email| %>
        <%= link_to development_sent_email_path(id: email[:id]), class: "block rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition hover:border-cyan-300 hover:shadow-md", data: { key: "development.emails.list.item" } do %>
          <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <div class="space-y-1">
              <p class="text-base font-semibold text-slate-900" data-key="development.emails.subject"><%= email[:subject] %></p>
              <p class="text-sm text-slate-500">
                <%= email[:timestamp].strftime("%b %d, %Y at %H:%M:%S") %>
                Â· <%= number_to_human_size(email[:size]) %>
              </p>
            </div>
            <span class="text-sm text-slate-400" data-key="development.emails.ago"><%= time_ago_in_words(email[:timestamp]) %> ago</span>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
