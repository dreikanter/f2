<% content_for :title, "Event ##{@event.id}" %>

<div class="space-y-8">
  <%= render PageHeaderComponent.new(title: "Event ##{@event.id}") do |header| %>
    <% if @previous_event %>
      <% header.with_action_button do %>
        <%= link_to "← Previous", admin_event_path(@previous_event), class: "ff-button ff-button--secondary ff-button--compact" %>
      <% end %>
    <% else %>
      <% header.with_action_button do %>
        <span class="inline-flex items-center justify-center whitespace-nowrap rounded-md border border-slate-200 bg-white px-4 py-2 text-base font-semibold text-slate-300 shadow-sm cursor-not-allowed">← Previous</span>
      <% end %>
    <% end %>
    <% if @next_event %>
      <% header.with_action_button do %>
        <%= link_to "Next →", admin_event_path(@next_event), class: "ff-button ff-button--secondary ff-button--compact" %>
      <% end %>
    <% else %>
      <% header.with_action_button do %>
        <span class="inline-flex items-center justify-center whitespace-nowrap rounded-md border border-slate-200 bg-white px-4 py-2 text-base font-semibold text-slate-300 shadow-sm cursor-not-allowed">Next →</span>
      <% end %>
    <% end %>
    <% header.with_action_button do %>
      <%= link_to "Back to Events", admin_events_path, class: "ff-button ff-button--secondary ff-button--compact" %>
    <% end %>
  <% end %>

  <% if @event.message.present? %>
    <%
      alert_class = case @event.level
                    when "error"
                      "ff-alert ff-alert--error"
                    when "warning"
                      "ff-alert ff-alert--warning"
                    else
                      "ff-alert ff-alert--info"
                    end
    %>
    <div class="<%= alert_class %>">
      <%= simple_format(@event.message, class: "mb-0") %>
    </div>
  <% end %>

  <%= render(EventDetailsComponent.new(event: @event)) %>

  <% if @event.metadata.present? && @event.metadata != {} %>
    <section class="space-y-4">
      <h2 class="ff-h2">Metadata</h2>
      <pre class="overflow-auto rounded-lg border border-slate-200 bg-slate-50 p-4 font-mono text-sm"><%= highlight_json(@event.metadata) %></pre>
    </section>
  <% end %>
</div>
