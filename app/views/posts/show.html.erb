<% content_for :title, "Post #{@post.id}" %>

<div class="space-y-8">
  <%= render PageHeaderComponent.new(title: "Post #{@post.id}") do |header| %>
    <% header.with_context_paragraph do %>
      <%= render BadgeComponent.new(
        text: @post.status.capitalize,
        color: post_status_badge_color(@post.status),
        key: "post.status_badge"
      ) %>
      <%= link_to "View source", feed_entry_path(@post.feed_entry), class: "text-sm text-blue-600 hover:text-blue-800 ml-3" %>
    <% end %>
    <% header.with_action_button do %>
      <%= link_to "Back to Posts", posts_path, class: class_names("ff-button", "ff-button--secondary", "ff-button--compact") %>
    <% end %>
    <% if policy(@post).destroy? %>
      <% header.with_action_button do %>
        <%= button_to "Withdraw", post_path(@post),
                      method: :delete,
                      class: class_names("ff-button", "ff-button--compact", "bg-red-600 hover:bg-red-500"),
                      data: {
                        turbo_confirm: "Withdraw this post? It will be removed from FreeFeed but remain visible here."
                      },
                      form: { class: "inline-block" } %>
      <% end %>
    <% end %>
  <% end %>

  <%= render PostDetailsComponent.new(post: @post) %>

  <div class="overflow-hidden rounded-xl border border-slate-200 bg-white shadow-sm p-4">
    <div class="text-slate-900">
      <%= simple_format(@post.content) %>
    </div>
  </div>
</div>
