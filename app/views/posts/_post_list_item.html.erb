<%# locals: (post:, show_feed: false, withdraw_allowed: false) %>
<% show_feed = local_assigns.fetch(:show_feed, false) %>
<% withdraw_allowed = local_assigns.fetch(:withdraw_allowed, false) %>

<li class="flex flex-col gap-2 p-4 sm:flex-row sm:items-start sm:gap-4">
  <div class="flex items-start gap-3 sm:flex-1">
    <span class="inline-flex shrink-0 text-slate-500">
      <%= post_status_icon(post.status) %>
    </span>
    <div class="flex flex-1 flex-col gap-1">
      <%= link_to post_path(post), class: class_names("inline-flex items-start text-base font-semibold text-slate-900 transition hover:text-slate-700", "ff-focus-ring") do %>
        <%= post_content_preview(post.content, 80) %>
      <% end %>
      <div class="ff-text flex flex-wrap items-center gap-x-2 gap-y-1 text-sm text-slate-500">
        <% post_metadata_segments(post, show_feed: show_feed, withdraw_allowed: withdraw_allowed).each_with_index do |segment, index| %>
          <% if index.positive? %>
            <span aria-hidden="true" class="text-slate-300">&bull;</span>
          <% end %>
          <span><%= segment %></span>
        <% end %>
      </div>
    </div>
  </div>
</li>
