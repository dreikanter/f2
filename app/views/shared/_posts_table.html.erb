<div class="table-responsive">
  <table class="table table-hover table-bordered posts-table">
    <thead>
      <tr>
        <th class="content-column">Content</th>
        <% unless local_assigns[:hide_feed_column] %>
          <th class="feed-column">Feed</th>
        <% end %>
        <th class="published-column text-center"><i class="bi bi-calendar3"></i></th>
        <th class="count-column text-center"><i class="bi bi-paperclip"></i></th>
        <th class="count-column text-center"><i class="bi bi-chat-dots"></i></th>
        <th class="status-column text-center"><i class="bi bi-info-circle"></i></th>
        <th class="source-column">Source</th>
        <th class="freefeed-column">FreeFeed</th>
      </tr>
    </thead>
    <tbody>
      <% posts.each do |post| %>
        <tr>
          <td class="content-column">
            <%= link_to post, class: "text-decoration-none" do %>
              <%= post_content_preview(post.content) %>
            <% end %>
          </td>
          <% unless local_assigns[:hide_feed_column] %>
            <td class="feed-column">
              <%= link_to post.feed, class: "text-decoration-none" do %>
                <%= post.feed.name %>
              <% end %>
            </td>
          <% end %>
          <td class="narrow-column text-center">
            <%= short_time_ago(post.published_at) if post.published_at %>
          </td>
          <td class="narrow-column text-center">
            <% if post.attachment_urls.present? %>
              <%= post.attachment_urls.length %>
            <% else %>
              <span class="text-muted">0</span>
            <% end %>
          </td>
          <td class="narrow-column text-center">
            <% if post.comments.present? %>
              <%= post.comments.length %>
            <% else %>
              <span class="text-muted">0</span>
            <% end %>
          </td>
          <td class="narrow-column text-center">
            <%= post_status_icon(post.status) %>
          </td>
          <td class="narrow-column source-column">
            <% if post.source_url.present? %>
              <%= link_to "Source", post.source_url,
                          target: "_blank",
                          rel: "noopener",
                          class: "text-decoration-none" %>
            <% end %>
          </td>
          <td class="narrow-column freefeed-column">
            <% if post.freefeed_post_id.present? %>
              <%= link_to "Repost", "#{post.feed.access_token.host}/#{post.feed.target_group}/#{post.freefeed_post_id}",
                          target: "_blank",
                          rel: "noopener",
                          class: "text-decoration-none" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
